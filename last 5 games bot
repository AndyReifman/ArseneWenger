import discord
import os
import requests
from bs4 import BeautifulSoup
import lxml
client = discord.Client()
# site where results are received from
source = requests.get("https://www.11v11.com/teams/arsenal/tab/opposingTeams/opposition/Chelsea/")
#finds the results
soup = BeautifulSoup(source.text, 'lxml')
games = soup.find_all(class_="result-status")
chelsea = []
#iterates through all the results
for game in games:
    chelsea.append(game.text)
#chooses only last 5 games
last5chelsea = chelsea[-5:]

source = requests.get("https://www.11v11.com/teams/arsenal/tab/opposingTeams/opposition/Leicester%20City/")

soup = BeautifulSoup(source.text, 'lxml')
games = soup.find_all(class_="result-status")
leicester = []

for game in games:
    leicester.append(game.text)
last5leicester = leicester[-5:]

source = requests.get("https://www.11v11.com/teams/arsenal/tab/opposingTeams/opposition/Manchester%20City/")

soup = BeautifulSoup(source.text, 'lxml')
games = soup.find_all(class_="result-status")
mancity = []
for game in games:
    mancity.append(game.text)
last5city = mancity[-5:]


source = requests.get("https://www.11v11.com/teams/arsenal/tab/opposingTeams/opposition/Liverpool/")

soup = BeautifulSoup(source.text, 'lxml')
games = soup.find_all(class_="result-status")
liverpool = []
for game in games:
    liverpool.append(game.text)
last5liverpool = liverpool[-5:]

source = requests.get("https://www.11v11.com/teams/arsenal/tab/opposingTeams/opposition/Tottenham%20Hotspur/")

soup = BeautifulSoup(source.text, 'lxml')
games = soup.find_all(class_="result-status")
spuds = []
for game in games:
    spuds.append(game.text)
last5spuds = spuds[-5:]

source = requests.get("https://www.11v11.com/teams/arsenal/tab/opposingTeams/opposition/Manchester%20United/")

soup = BeautifulSoup(source.text, 'lxml')
games = soup.find_all(class_="result-status")
utd = []
for game in games:
    utd.append(game.text)
last5utd = utd[-5:]

@client.event
async def on_ready():
    print('We have logged in as {0.user}'.format(client))

@client.event
async def on_message(message):
    if message.author == client.user:
        return

    if message.content.startswith('!history mancity'):
        await message.channel.send("Our last 5 games with this club:")
        await message.channel.send(last5city)
    elif message.content.startswith('!history leicester'):
        await message.channel.send("Our last 5 games with this club:")
        await message.channel.send(last5leicester)
    elif message.content.startswith('!history chelsea'):
        await message.channel.send("Our last 5 games with this club:")
        await message.channel.send(last5chelsea)
    elif message.content.startswith('!history liverpool'):
        await message.channel.send("Our last 5 games with this club:")
        await message.channel.send(last5liverpool)
    elif message.content.startswith('!history spuds'):
        await message.channel.send("Our last 5 games with this club:")
        await message.channel.send(last5spuds)
    elif message.content.startswith('!history manutd'):
        await message.channel.send("Our last 5 games with this club:")
        await message.channel.send(last5utd)

client.run("token")
